<%- include('partials/header.ejs') %>

<div>

    <div class="relative w-full">
        <img src="/assets/header.jpg" alt="header-image" class="w-full h-40 object-cover">
        
        <div class="absolute bottom-0 left-0 right-0 h-full bg-gradient-to-t from-white via-transparent to-transparent"></div>

        <h1 class="absolute bottom-0 left-0 pl-10 text-stone-800 font-bold text-4xl">Adelya's Shelves</h1>
    </div>

    <div class="px-10">

        <p class="pt-3 pb-3">Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatum iure eveniet corporis. Minima, delectus maiores? Quas, voluptates atque, tenetur officia ullam dolor dolorem accusamus esse eaque a doloribus, consectetur facere!</p>

        <div class="flex items-center space-x-2">
            <div class="flex items-center"> <!-- Wrap the "Sort by" text to align it properly -->
                <p class="pb-3 text-center">Sort by</p>
            </div>
            <form action="/sort" method="post" class="flex space-x-2">
                <button type="submit" name="sort" value="title" class="border border-stone-800 text-stone-800 rounded-full px-4 py-1 hover:bg-stone-800 hover:text-white transition-colors duration-200">Title</button>
                <button type="submit" name="sort" value="author" class="border border-stone-800 text-stone-800 rounded-full px-4 py-1 hover:bg-stone-800 hover:text-white transition-colors duration-200">Author</button>
                <button type="submit" name="sort" value="rating" class="border border-stone-800 text-stone-800 rounded-full px-4 py-1 hover:bg-stone-800 hover:text-white transition-colors duration-200">Rating</button>
            </form>
        </div>

        <% locals.data.forEach(book => { %>
            <div>

                <% if (!book.cover_id || book.cover_id.trim().length === 0) { %>
                    <div>
                        <h2><%= book.title %></h2>
                        <h3>By <%= book.author %></h3>
                    </div>
                <% } else { %>
                    <img src="//covers.openlibrary.org/b/id/<%= book.cover_id %>-M.jpg"
                        srcset="//covers.openlibrary.org/b/id/<%= book.cover_id %>-M.jpg 2x" alt="book-cover">
                <% } %>

                <div>
                    <div>
                        <h2><%= book.title %></h2>
                        <h3><%= book.author %></h3>
                        <h6><%= book.review_date %></h6>
                    </div>

                    <div>
                        <p><%= book.review %></p>

                        <h3>Book Summary</h3>
                        <p><%= book.summary %></p>

                    </div>

                    <div>
                        <h3>Rating</h3>
                        <div method = "post" >
                            <% for (let i = 0; i < book.rating; i++) { %>
                                <span class="fa fa-star checked"></span>
                            <% } %>
                            <% if (book.rating < 5) { %>
                                <% for (let i = 0; i < (5 - book.rating); i++) { %>
                                    <span class="fa fa-star"></span>
                                <% } %>
                            <% } %>
                        </div>
                        
                    </div>

                    
                    

                </div>

            </div>
        <% }) %>

    </div>
<div>

